<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุชุญูู - codespher</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/dashboard.css">
</head>
<body>
    <!-- Mobile menu toggle -->
    <button class="dashboard-menu-toggle" id="dashboardMenuToggle" aria-label="ูุชุญ ุงููุงุฆูุฉ">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="dashboardSidebar">
        <div class="sidebar-header">
            <h2>ููุญุฉ ุงูุชุญูู</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="index.html" class="sidebar-link">โ ุงูุนูุฏุฉ ูููููุน</a>
            <button class="sidebar-link active" data-section="add">ุฅุถุงูุฉ ูุดุฑูุน</button>
            <button class="sidebar-link" data-section="manage">ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน</button>
            <button class="sidebar-link" data-section="requests">ุทูุจุงุช AI <span class="badge" id="requestsBadge">0</span></button>
            <button class="sidebar-link" data-section="settings">ุงูุฅุนุฏุงุฏุงุช</button>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="dashboard-main">
        <div class="dashboard-container">
            <!-- Settings Section -->
            <section class="dashboard-section" id="settingsSection">
                <h1>ุงูุฅุนุฏุงุฏุงุช</h1>
                <div class="settings-form">
                    <div class="form-group">
                        <label for="apiKey">OpenAI API Key</label>
                        <input type="password" id="apiKey" placeholder="ุฃุฏุฎู API Key ุงูุฎุงุต ุจู">
                        <p class="form-help">ุงุญุตู ุนูู API Key ูู <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a></p>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveApiKey()">ุญูุธ API Key</button>
                        <button class="btn btn-outline" onclick="testApiKey()">ุงุฎุชุจุงุฑ ุงูุงุชุตุงู</button>
                    </div>
                </div>
            </section>

            <!-- Add Project Section -->
            <section class="dashboard-section active" id="addSection">
                <h1>ุฅุถุงูุฉ ูุดุฑูุน ุฌุฏูุฏ</h1>
                <form id="addProjectForm" class="project-form">
                    <div class="form-group">
                        <label for="projectName">ุงุณู ุงููุดุฑูุน *</label>
                        <input type="text" id="projectName" name="name" required placeholder="ุฃุฏุฎู ุงุณู ุงููุดุฑูุน">
                    </div>

                    <div class="form-group">
                        <label for="projectDescription">ูุตู ุงููุดุฑูุน *</label>
                        <textarea id="projectDescription" name="description" required rows="5" placeholder="ุฃุฏุฎู ูุตู ุงููุดุฑูุน"></textarea>
                    </div>

                    <div class="form-group">
                        <label>ููุน ุงููุดุฑูุน *</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="projectType" value="file" checked>
                                <span>ุฑูุน ููู ูุดุฑูุน</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="projectType" value="url">
                                <span>ุฑุงุจุท ุฎุงุฑุฌู (URL)</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group" id="fileUploadGroup">
                        <label for="projectFile">ูููุงุช ุงููุดุฑูุน *</label>
                        <input type="file" id="projectFile" name="file" accept=".html,.htm,.css,.js,.py" multiple style="display: none;">
                        <div class="file-upload-area" id="fileUploadArea">
                            <span class="file-upload-icon">๐</span>
                            <span class="file-upload-text">ุงุถุบุท ูุงุฎุชูุงุฑ ุงููููุงุช (HTML, CSS, JS, PY) ุฃู ุงุณุญุจ ุงููููุงุช ููุง</span>
                            <div class="file-upload-list" id="fileUploadList"></div>
                        </div>
                        <p class="file-info">ููููู ุฑูุน ุนุฏุฉ ูููุงุช: HTML, CSS, JavaScript, Python</p>
                    </div>

                    <div class="form-group" id="urlInputGroup" style="display: none;">
                        <label for="projectUrl">ุฑุงุจุท ุงููุดุฑูุน (URL) *</label>
                        <input type="url" id="projectUrl" name="url" placeholder="https://example.com">
                    </div>

                    <div class="form-group">
                        <label>ุทุฑููุฉ ุงูุนุฑุถ *</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="displayType" value="preview" checked>
                                <span>ูุนุงููุฉ ุฏุงุฎู ุงููููุน</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="displayType" value="newtab">
                                <span>ูุชุญ ุจุตูุญุฉ ุฌุฏูุฏุฉ</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="isActive" checked>
                            <span>ุชูุนูู ุงููุดุฑูุน (ุณูุธูุฑ ูู ุงููููุน)</span>
                        </label>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">ุญูุธ ุงููุดุฑูุน</button>
                        <button type="reset" class="btn btn-outline">ุฅุนุงุฏุฉ ุชุนููู</button>
                    </div>
                </form>
            </section>

            <!-- Manage Projects Section -->
            <section class="dashboard-section" id="manageSection">
                <h1>ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน</h1>
                <div class="projects-list" id="projectsList">
                    <p class="no-projects">ูุง ุชูุฌุฏ ูุดุงุฑูุน ุญุงููุงู.</p>
                </div>
            </section>

            <!-- AI Requests Section -->
            <section class="dashboard-section" id="requestsSection">
                <h1>ุทูุจุงุช AI ุงููุงุฑุฏุฉ</h1>
                <div class="requests-list" id="requestsList">
                    <p class="no-projects">ูุง ุชูุฌุฏ ุทูุจุงุช ุญุงููุงู.</p>
                </div>
            </section>
        </div>
    </main>

    <!-- Edit Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content modal-small">
            <span class="modal-close" id="editModalClose">&times;</span>
            <h2>ุชุนุฏูู ุงููุดุฑูุน</h2>
            <form id="editProjectForm" class="project-form">
                <input type="hidden" id="editProjectId">
                
                <div class="form-group">
                    <label for="editProjectName">ุงุณู ุงููุดุฑูุน *</label>
                    <input type="text" id="editProjectName" required>
                </div>

                <div class="form-group">
                    <label for="editProjectDescription">ูุตู ุงููุดุฑูุน *</label>
                    <textarea id="editProjectDescription" required rows="5"></textarea>
                </div>

                <div class="form-group">
                    <label>ููุน ุงููุดุฑูุน *</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="editProjectType" value="file">
                            <span>ููู ูุดุฑูุน</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="editProjectType" value="url">
                            <span>ุฑุงุจุท ุฎุงุฑุฌู (URL)</span>
                        </label>
                    </div>
                </div>

                <div class="form-group" id="editFileUploadGroup" style="display: none;">
                    <label for="editProjectFile">ูููุงุช ุงููุดุฑูุน *</label>
                    <input type="file" id="editProjectFile" name="file" accept=".html,.htm,.css,.js,.py" multiple style="display: none;">
                    <div class="file-upload-area" id="editFileUploadArea">
                        <span class="file-upload-icon">๐</span>
                        <span class="file-upload-text">ุงุถุบุท ูุงุฎุชูุงุฑ ุงููููุงุช (HTML, CSS, JS, PY) ุฃู ุงุณุญุจ ุงููููุงุช ููุง</span>
                        <div class="file-upload-list" id="editFileUploadList"></div>
                    </div>
                    <p class="file-info" id="editFileInfo" style="display: none; color: var(--text-muted); font-size: 0.875rem; margin-top: 0.5rem;"></p>
                    <p class="file-info">ููููู ุฑูุน ุนุฏุฉ ูููุงุช: HTML, CSS, JavaScript, Python</p>
                </div>

                <div class="form-group" id="editUrlInputGroup">
                    <label for="editProjectUrl">ุฑุงุจุท ุงููุดุฑูุน (URL) *</label>
                    <input type="url" id="editProjectUrl">
                </div>

                <div class="form-group">
                    <label>ุทุฑููุฉ ุงูุนุฑุถ *</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="editDisplayType" value="preview">
                            <span>ูุนุงููุฉ ุฏุงุฎู ุงููููุน</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="editDisplayType" value="newtab">
                            <span>ูุชุญ ุจุตูุญุฉ ุฌุฏูุฏุฉ</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="editIsActive">
                        <span>ุชูุนูู ุงููุดุฑูุน</span>
                    </label>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">ุญูุธ ุงูุชุนุฏููุงุช</button>
                    <button type="button" class="btn btn-outline" id="cancelEdit">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal" id="previewModal">
        <div class="modal-content">
            <span class="modal-close" id="previewModalClose">&times;</span>
            <iframe id="previewFrame" src="" frameborder="0"></iframe>
        </div>
    </div>

    <script type="module" src="assets/js/firebase-init.js"></script>
    <script src="assets/js/storage-utils.js"></script>
    <script src="assets/js/data.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script>
        (function() {
            var toggle = document.getElementById('dashboardMenuToggle');
            var sidebar = document.getElementById('dashboardSidebar');
            var overlay = document.getElementById('sidebarOverlay');
            function openMenu() {
                sidebar.classList.add('sidebar-open');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            function closeMenu() {
                sidebar.classList.remove('sidebar-open');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
            if (toggle) toggle.addEventListener('click', openMenu);
            if (overlay) overlay.addEventListener('click', closeMenu);
            document.querySelectorAll('.sidebar-link[data-section]').forEach(function(link) {
                link.addEventListener('click', function() { if (window.innerWidth <= 768) closeMenu(); });
            });
        })();
    </script>
</body>
</html>
